{
  "hash": "520baed2dbb13954fd97094475d97aed",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exploring the Data - Bus Stops\"\nauthor: \"Goh Si Hui\"\ndate: \"Sep 8 2024\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  warning: false\n  freeze: true\n---\n\n\n\n\n\n\n# Getting Started \n\n## Downloading the packages \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\npacman::p_load(tmap, sf, DT, stplanr, tidyverse)\n```\n:::\n\n\n\n\n\n# Importing the Data \n\n## Passenger Volume by Origin Destination Bus Stops \n\n::: {.panel-tabset}\n\n## Apr 2024  \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_apr <- read_csv(\"data/aspatial/origin_destination_bus_202404.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 5667461 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): YEAR_MONTH, DAY_TYPE, PT_TYPE, ORIGIN_PT_CODE, DESTINATION_PT_CODE\ndbl (2): TIME_PER_HOUR, TOTAL_TRIPS\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## May 2024 \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_may <- read_csv(\"data/aspatial/origin_destination_bus_202405.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 5731170 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): YEAR_MONTH, DAY_TYPE, PT_TYPE, ORIGIN_PT_CODE, DESTINATION_PT_CODE\ndbl (2): TIME_PER_HOUR, TOTAL_TRIPS\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Jun 2024\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_jun <- read_csv(\"data/aspatial/origin_destination_bus_202406.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 5658443 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): YEAR_MONTH, DAY_TYPE, PT_TYPE, ORIGIN_PT_CODE, DESTINATION_PT_CODE\ndbl (2): TIME_PER_HOUR, TOTAL_TRIPS\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n\n::: \n\nChecking the data \n\n::: {.panel-tabset}\n## Apr 2024 \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nglimpse(odbus_apr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,667,461\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-04\", \"2024-04\", \"2024-04\", \"2024-04\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKENDS/HOLIDAY\",…\n$ TIME_PER_HOUR       <dbl> 16, 16, 14, 14, 17, 17, 17, 17, 7, 17, 14, 10, 20,…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <chr> \"04168\", \"04168\", \"80119\", \"80119\", \"44069\", \"4406…\n$ DESTINATION_PT_CODE <chr> \"10051\", \"10051\", \"90079\", \"90079\", \"17229\", \"1722…\n$ TOTAL_TRIPS         <dbl> 2, 9, 6, 8, 1, 2, 17, 2, 6, 2, 5, 3, 7, 1, 5, 2, 1…\n```\n\n\n:::\n:::\n\n\n\n\n\n## May 2024\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nglimpse(odbus_may)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,731,170\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-05\", \"2024-05\", \"2024-05\", \"2024-05\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKDAY\", \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKDAY…\n$ TIME_PER_HOUR       <dbl> 17, 10, 10, 7, 7, 11, 16, 16, 16, 5, 11, 11, 18, 1…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <chr> \"24499\", \"65239\", \"65239\", \"23519\", \"23519\", \"5250…\n$ DESTINATION_PT_CODE <chr> \"22221\", \"65159\", \"65159\", \"23311\", \"23311\", \"4204…\n$ TOTAL_TRIPS         <dbl> 3, 3, 3, 1, 1, 2, 15, 3, 2, 1, 2, 4, 5, 4, 9, 43, …\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Jun 2024\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nglimpse(odbus_jun)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,658,443\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-06\", \"2024-06\", \"2024-06\", \"2024-06\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKENDS/HOLIDAY\",…\n$ TIME_PER_HOUR       <dbl> 21, 17, 9, 14, 13, 6, 0, 22, 8, 18, 12, 19, 10, 10…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <chr> \"82159\", \"98299\", \"43051\", \"59479\", \"52069\", \"2142…\n$ DESTINATION_PT_CODE <chr> \"01119\", \"97051\", \"44389\", \"59509\", \"52189\", \"0917…\n$ TOTAL_TRIPS         <dbl> 1, 43, 7, 1, 20, 2, 2, 3, 36, 15, 1, 2, 65, 1, 11,…\n```\n\n\n:::\n:::\n\n\n\n\n\n::::\n\n\nConvert the origin and destination codes into factors \n\n::: {.panel-tabset}\n\n## Apr 2024  \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_apr$ORIGIN_PT_CODE <- as.factor(odbus_apr$ORIGIN_PT_CODE)\n\nodbus_apr$DESTINATION_PT_CODE <- as.factor(odbus_apr$DESTINATION_PT_CODE)\n\nglimpse(odbus_apr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,667,461\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-04\", \"2024-04\", \"2024-04\", \"2024-04\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKENDS/HOLIDAY\",…\n$ TIME_PER_HOUR       <dbl> 16, 16, 14, 14, 17, 17, 17, 17, 7, 17, 14, 10, 20,…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <fct> 04168, 04168, 80119, 80119, 44069, 44069, 20281, 2…\n$ DESTINATION_PT_CODE <fct> 10051, 10051, 90079, 90079, 17229, 17229, 20141, 2…\n$ TOTAL_TRIPS         <dbl> 2, 9, 6, 8, 1, 2, 17, 2, 6, 2, 5, 3, 7, 1, 5, 2, 1…\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## May 2024\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_may$ORIGIN_PT_CODE <- as.factor(odbus_may$ORIGIN_PT_CODE)\n\nodbus_may$DESTINATION_PT_CODE <- as.factor(odbus_may$DESTINATION_PT_CODE)\n\nglimpse(odbus_may)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,731,170\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-05\", \"2024-05\", \"2024-05\", \"2024-05\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKDAY\", \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKDAY…\n$ TIME_PER_HOUR       <dbl> 17, 10, 10, 7, 7, 11, 16, 16, 16, 5, 11, 11, 18, 1…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <fct> 24499, 65239, 65239, 23519, 23519, 52509, 03151, 5…\n$ DESTINATION_PT_CODE <fct> 22221, 65159, 65159, 23311, 23311, 42041, 11161, 5…\n$ TOTAL_TRIPS         <dbl> 3, 3, 3, 1, 1, 2, 15, 3, 2, 1, 2, 4, 5, 4, 9, 43, …\n```\n\n\n:::\n:::\n\n\n\n\n\n## Jun 2024\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nodbus_jun$ORIGIN_PT_CODE <- as.factor(odbus_jun$ORIGIN_PT_CODE)\n\nodbus_jun$DESTINATION_PT_CODE <- as.factor(odbus_jun$DESTINATION_PT_CODE)\n\nglimpse(odbus_jun)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,658,443\nColumns: 7\n$ YEAR_MONTH          <chr> \"2024-06\", \"2024-06\", \"2024-06\", \"2024-06\", \"2024-…\n$ DAY_TYPE            <chr> \"WEEKENDS/HOLIDAY\", \"WEEKDAY\", \"WEEKENDS/HOLIDAY\",…\n$ TIME_PER_HOUR       <dbl> 21, 17, 9, 14, 13, 6, 0, 22, 8, 18, 12, 19, 10, 10…\n$ PT_TYPE             <chr> \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"BUS\", \"…\n$ ORIGIN_PT_CODE      <fct> 82159, 98299, 43051, 59479, 52069, 21421, 81029, 2…\n$ DESTINATION_PT_CODE <fct> 01119, 97051, 44389, 59509, 52189, 09179, 07211, 2…\n$ TOTAL_TRIPS         <dbl> 1, 43, 7, 1, 20, 2, 2, 3, 36, 15, 1, 2, 65, 1, 11,…\n```\n\n\n:::\n:::\n\n\n\n\n\n:::\n\n\n## Geospatial Data \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbusstop <- st_read(dsn = \"data/spatial\",\n                   layer = \"BusStop\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `BusStop' from data source \n  `C:\\sihuihui\\mitbcapstone\\notebooks\\data\\spatial' using driver `ESRI Shapefile'\nSimple feature collection with 5166 features and 3 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48285.52 ymax: 52983.82\nProjected CRS: SVY21\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nglimpse(busstop)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,166\nColumns: 4\n$ BUS_STOP_N <chr> \"65059\", \"16171\", \"61101\", \"01239\", \"17269\", \"11291\", \"1153…\n$ BUS_ROOF_N <chr> \"B12\", \"B06\", \"NIL\", \"B01\", \"B01\", \"B17\", \"B12\", \"B05\", \"B0…\n$ LOC_DESC   <chr> \"ST ANNE'S CH\", \"YUSOF ISHAK HSE\", \"BLK 120\", \"SULTAN PLAZA…\n$ geometry   <POINT [m]> POINT (35565.66 41659.52), POINT (21439.91 31253.63),…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbusstop <- st_transform(busstop, crs = 3414)\nglimpse(busstop)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 5,166\nColumns: 4\n$ BUS_STOP_N <chr> \"65059\", \"16171\", \"61101\", \"01239\", \"17269\", \"11291\", \"1153…\n$ BUS_ROOF_N <chr> \"B12\", \"B06\", \"NIL\", \"B01\", \"B01\", \"B17\", \"B12\", \"B05\", \"B0…\n$ LOC_DESC   <chr> \"ST ANNE'S CH\", \"YUSOF ISHAK HSE\", \"BLK 120\", \"SULTAN PLAZA…\n$ geometry   <POINT [m]> POINT (35565.66 41659.52), POINT (21439.91 31253.63),…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbusstop$BUS_STOP_N <- as.factor(busstop$BUS_STOP_N)\nbusstop\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 5166 features and 3 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48285.52 ymax: 52983.82\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n   BUS_STOP_N BUS_ROOF_N                 LOC_DESC                  geometry\n1       65059        B12             ST ANNE'S CH POINT (35565.66 41659.52)\n2       16171        B06          YUSOF ISHAK HSE POINT (21439.91 31253.63)\n3       61101        NIL                  BLK 120 POINT (31381.06 35313.49)\n4       01239        B01             SULTAN PLAZA POINT (31152.55 31688.08)\n5       17269        B01                  BLK 730  POINT (20134.2 31917.38)\n6       11291        B17      COLD STORAGE JELITA POINT (22723.57 33349.85)\n7       11531        B12 OPP LEA HIN HARDWARE FTY POINT (25112.11 30368.68)\n8       46529        B05        OPP MARSILING STN POINT (21465.51 45974.12)\n9       95151        B01       AIRPORT POLICE STN POINT (44529.73 36038.38)\n10      71169        B01              AZTECH BLDG POINT (34541.04 34361.09)\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbusstop <- write_rds(busstop, \"data/rds/busstop.rds\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nmpsz <- st_read(dsn = \"data/spatial\",\n                layer = \"MPSZ-2019\") \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `MPSZ-2019' from data source \n  `C:\\sihuihui\\mitbcapstone\\notebooks\\data\\spatial' using driver `ESRI Shapefile'\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nmpsz <- st_transform(mpsz, crs = 3414)\nmpsz\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n                 SUBZONE_N SUBZONE_C       PLN_AREA_N PLN_AREA_C       REGION_N\n1              MARINA EAST    MESZ01      MARINA EAST         ME CENTRAL REGION\n2         INSTITUTION HILL    RVSZ05     RIVER VALLEY         RV CENTRAL REGION\n3           ROBERTSON QUAY    SRSZ01  SINGAPORE RIVER         SR CENTRAL REGION\n4  JURONG ISLAND AND BUKOM    WISZ01  WESTERN ISLANDS         WI    WEST REGION\n5             FORT CANNING    MUSZ02           MUSEUM         MU CENTRAL REGION\n6         MARINA EAST (MP)    MPSZ05    MARINE PARADE         MP CENTRAL REGION\n7                   SUDONG    WISZ03  WESTERN ISLANDS         WI    WEST REGION\n8                  SEMAKAU    WISZ02  WESTERN ISLANDS         WI    WEST REGION\n9           SOUTHERN GROUP    SISZ02 SOUTHERN ISLANDS         SI CENTRAL REGION\n10                 SENTOSA    SISZ01 SOUTHERN ISLANDS         SI CENTRAL REGION\n   REGION_C                       geometry\n1        CR MULTIPOLYGON (((33222.98 29...\n2        CR MULTIPOLYGON (((28481.45 30...\n3        CR MULTIPOLYGON (((28087.34 30...\n4        WR MULTIPOLYGON (((14557.7 304...\n5        CR MULTIPOLYGON (((29542.53 31...\n6        CR MULTIPOLYGON (((35279.55 30...\n7        WR MULTIPOLYGON (((15772.59 21...\n8        WR MULTIPOLYGON (((19843.41 21...\n9        CR MULTIPOLYGON (((30870.53 22...\n10       CR MULTIPOLYGON (((26879.04 26...\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nmpsz <- write_rds(mpsz, \"data/rds/mpsz.rds\")\n```\n:::\n\n\n\n\n\n\n\n# Geospatial Data Wrangling \n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}