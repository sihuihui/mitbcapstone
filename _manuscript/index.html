<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Goh Si Hui">
<meta name="dcterms.date" content="2024-09-01">
<meta name="keywords" content="Commuter flows, Gravity Model, Bus, Singapore">

<title>Comparative Analysis Of Non-Spatial and Spatial Approaches In Statistical And Machine Learning Methods for Predicting Singapore Bus Commuter Flows</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="citation_title" content="Comparative Analysis Of Non-Spatial and Spatial Approaches In Statistical And Machine Learning Methods for Predicting Singapore Bus Commuter Flows">
<meta name="citation_abstract" content="&amp;amp;lt;To be updated&amp;gt;
">
<meta name="citation_keywords" content="Commuter flows,Gravity Model,Bus,Singapore">
<meta name="citation_author" content="Goh Si Hui">
<meta name="citation_publication_date" content="2024-09-01">
<meta name="citation_cover_date" content="2024-09-01">
<meta name="citation_year" content="2024">
<meta name="citation_online_date" content="2024-09-01">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="">
<meta name="citation_reference" content="citation_title=Generalized radiation model for human migration;,citation_abstract=Abstract One of the main problems in the study of human migration is predicting how many people will migrate from one place to another. An important model used for this problem is the radiation model for human migration, which models locations as attractors whose attractiveness is moderated by distance as well as attractiveness of neighboring locations. In the model, the measure used for attractiveness is population which is a proxy for economic opportunities and jobs. However, this may not be valid, for example, in developing countries, and fails to take into account people migrating for non-economic reasons such as quality of life. Here, we extend the radiation model to include the number of amenities (offices, schools, leisure places, etc.) as features aside from population. We find that the generalized radiation model outperforms the radiation model by as much as 10.3% relative improvement in mean absolute percentage error based on actual census data five years apart. The best performing model does not even include population information which suggests that amenities already include the information that we get from population. The generalized radiation model provides a measure of feature importance thus presenting another avenue for investigating the effect of amenities on human migration.;,citation_author=Christian Alis;,citation_author=Erika Fille Legara;,citation_author=Christopher Monterola;,citation_publication_date=2021-11;,citation_cover_date=2021-11;,citation_year=2021;,citation_fulltext_html_url=https://www.nature.com/articles/s41598-021-02109-1;,citation_issue=1;,citation_doi=10.1038/s41598-021-02109-1;,citation_issn=2045-2322;,citation_volume=11;,citation_journal_title=Scientific Reports;">
<meta name="citation_reference" content="citation_title=Predicting human mobility through the assimilation of social media traces into mobility models;,citation_author=Mariano G Beiró;,citation_author=André Panisson;,citation_author=Michele Tizzoni;,citation_author=Ciro Cattuto;,citation_publication_date=2016-12;,citation_cover_date=2016-12;,citation_year=2016;,citation_fulltext_html_url=http://epjdatascience.springeropen.com/articles/10.1140/epjds/s13688-016-0092-2;,citation_issue=1;,citation_doi=10.1140/epjds/s13688-016-0092-2;,citation_issn=2193-1127;,citation_volume=5;,citation_journal_title=EPJ Data Science;">
<meta name="citation_reference" content="citation_title=Predicting human mobility through the assimilation of social media traces into mobility models;,citation_author=Mariano G Beiró;,citation_author=André Panisson;,citation_author=Michele Tizzoni;,citation_author=Ciro Cattuto;,citation_publication_date=2016-12;,citation_cover_date=2016-12;,citation_year=2016;,citation_fulltext_html_url=http://epjdatascience.springeropen.com/articles/10.1140/epjds/s13688-016-0092-2;,citation_issue=1;,citation_doi=10.1140/epjds/s13688-016-0092-2;,citation_issn=2193-1127;,citation_volume=5;,citation_journal_title=EPJ Data Science;">
<meta name="citation_reference" content="citation_title=The Use of LS-SVM for Short-Term Passenger Flow Prediction;,citation_abstract=Transit flow is the basement of transit planning and scheduling. The paper presents a new transit flow prediction model based on Least Squares Support Vector Machine (LS-SVM). With reference to the theory of Support Vector Machine and Genetic Algorithm, a new short-term passenger flow prediction model is built employing LSSVM, and a new evaluation indicator is used for presenting training permanence. An improved genetic algorithm is designed by enhancing crossover and variation in the use of optimizing the penalty parameter γ and kernel parameter s in LS-SVM. By using this method, passenger flow in a certain bus route is predicted in Changchun. The obtained result shows that there is little difference between actual value and prediction, and the majority of the equal coefficients of a training set are larger than 0.90, which shows the validity of the approach.;,citation_author=Qian Chen;,citation_author=Wenquan Li;,citation_author=Jinhuan Zhao;,citation_publication_date=2011-04;,citation_cover_date=2011-04;,citation_year=2011;,citation_fulltext_html_url=https://journals.vilniustech.lt/index.php/Transport/article/view/5541;,citation_issue=1;,citation_doi=10.3846/16484142.2011.555472;,citation_issn=1648-4142, 1648-3480;,citation_volume=26;,citation_journal_title=Transport;">
<meta name="citation_reference" content="citation_title=Predicting Short-Term Subway Ridership and Prioritizing Its Influential Factors Using Gradient Boosting Decision Trees;,citation_abstract=Understanding the relationship between short-term subway ridership and its influential factors is crucial to improving the accuracy of short-term subway ridership prediction. Although there has been a growing body of studies on short-term ridership prediction approaches, limited effort is made to investigate the short-term subway ridership prediction considering bus transfer activities and temporal features. To fill this gap, a relatively recent data mining approach called gradient boosting decision trees (GBDT) is applied to short-term subway ridership prediction and used to capture the associations with the independent variables. Taking three subway stations in Beijing as the cases, the short-term subway ridership and alighting passengers from its adjacent bus stops are obtained based on transit smart card data. To optimize the model performance with different combinations of regularization parameters, a series of GBDT models are built with various learning rates and tree complexities by fitting a maximum of trees. The optimal model performance confirms that the gradient boosting approach can incorporate different types of predictors, fit complex nonlinear relationships, and automatically handle the multicollinearity effect with high accuracy. In contrast to other machine learning methods—or “black-box” procedures—the GBDT model can identify and rank the relative influences of bus transfer activities and temporal features on short-term subway ridership. These findings suggest that the GBDT model has considerable advantages in improving short-term subway ridership prediction in a multimodal public transportation system.;,citation_author=Chuan Ding;,citation_author=Donggen Wang;,citation_author=Xiaolei Ma;,citation_author=Haiying Li;,citation_publication_date=2016-10;,citation_cover_date=2016-10;,citation_year=2016;,citation_fulltext_html_url=https://www.mdpi.com/2071-1050/8/11/1100;,citation_issue=11;,citation_doi=10.3390/su8111100;,citation_issn=2071-1050;,citation_volume=8;,citation_journal_title=Sustainability;">
<meta name="citation_reference" content="citation_title=Geographical random forests: A spatial extension of the random forest algorithm to address spatial heterogeneity in remote sensing and population modelling;,citation_author=Stefanos Georganos;,citation_author=Tais Grippa;,citation_author=Assane Niang Gadiaga;,citation_author=Catherine Linard;,citation_author=Moritz Lennert;,citation_author=Sabine Vanhuysse;,citation_author=Nicholus Mboga;,citation_author=Eléonore Wolff;,citation_author=Stamatis Kalogirou;,citation_publication_date=2021-01;,citation_cover_date=2021-01;,citation_year=2021;,citation_fulltext_html_url=https://www.tandfonline.com/doi/full/10.1080/10106049.2019.1595177;,citation_issue=2;,citation_doi=10.1080/10106049.2019.1595177;,citation_issn=1010-6049, 1752-0762;,citation_volume=36;,citation_journal_title=Geocarto International;">
<meta name="citation_reference" content="citation_title=A geographically weighted artificial neural network;,citation_author=Julian Hagenauer;,citation_author=Marco Helbich;,citation_publication_date=2022-02;,citation_cover_date=2022-02;,citation_year=2022;,citation_fulltext_html_url=https://www.tandfonline.com/doi/full/10.1080/13658816.2021.1871618;,citation_issue=2;,citation_doi=10.1080/13658816.2021.1871618;,citation_issn=1365-8816, 1362-3087;,citation_volume=36;,citation_journal_title=International Journal of Geographical Information Science;">
<meta name="citation_reference" content="citation_title=A novel approach to estimating urban land surface temperature by the combination of geographically weighted regression and deep neural network models;,citation_author=Jia Siqi;,citation_author=Wang Yuhong;,citation_author=Chen Ling;,citation_author=Bi Xiaowen;,citation_publication_date=2023-01;,citation_cover_date=2023-01;,citation_year=2023;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S221209552200308X;,citation_doi=10.1016/j.uclim.2022.101390;,citation_issn=22120955;,citation_volume=47;,citation_journal_title=Urban Climate;">
<meta name="citation_reference" content="citation_title=More S’pore residents take trains and buses to work, fewer drive to the office: Population census;,citation_abstract=The share of residents who take only taxis and private-hire cars to work has risen over the last decade. Read more at straitstimes.com.;,citation_author=Yufeng Kok;,citation_publication_date=2021-06;,citation_cover_date=2021-06;,citation_year=2021;,citation_fulltext_html_url=https://www.straitstimes.com/singapore/more-spore-residents-take-trains-and-buses-to-work-fewer-drive-to-the-office-population;,citation_issn=0585-3923;,citation_journal_title=The Straits Times;">
<meta name="citation_reference" content="citation_title=Kernel-based formulation of intervening opportunities for spatial interaction modelling;,citation_abstract=Abstract Understanding spatial interactions such as human mobility has been one of the main analytical themes in geography, spatial economics, and traffic engineering for a long time. The intervening opportunities models, including the radiation model, provide a framework to elucidate spatial interactions generated by an individual’s distance-ordered decision-making process. However, such classical definitions of intervening opportunities have often failed to predict realistic flow volumes, particularly for short-distance flows. To overcome this problem, we have proposed a new formulation of intervening opportunities with a kernel function to introduce a fuzziness in spatial search behaviours of destinations, to develop a new variant of the radiation model. The mobility patterns resulting from the modified radiation model that included kernel-based intervening opportunities outperformed the original radiation model when fitted to four datasets of inter-regional flows.;,citation_author=Masaki Kotsubo;,citation_author=Tomoki Nakaya;,citation_publication_date=2021-01;,citation_cover_date=2021-01;,citation_year=2021;,citation_fulltext_html_url=https://www.nature.com/articles/s41598-020-80246-9;,citation_issue=1;,citation_doi=10.1038/s41598-020-80246-9;,citation_issn=2045-2322;,citation_volume=11;,citation_journal_title=Scientific Reports;">
<meta name="citation_reference" content="citation_title=Using a Machine Learning Approach to Predict the Thailand Underground Train’s Passenger;,citation_abstract=In today’s world, data has become an asset for businesses. Many sectors use data technology to advance their businesses. Building management is one of the processes on which numerous studies have been conducted to assist building users. Thailand has progressed in terms of transportation infrastructure and public transportation. The Metropolitan Rapid Transit (MRT) system has more than one hundred million users per year. However, crowding is a concern in the present since crowding creates a problem and reduces customer pleasure. The goal of this research is to create a machine learning model for forecasting passenger demand over time. In addition, standard data collecting equipment was used to collect data from the Metropolitan Rapid Transit (MRT) Purple Line. This line has a total of 16 stations. Station name, date, day, month, period, number of passengers, holidays, weekends, and weather are among the nine factors. Analysis approaches included the analysis phase, classification, and regression algorithm. However, the regression algorithm’s accuracy is poor and therefore cannot be used. Before using machine learning classification methods, the K-means was used to cluster the types of passengers. In addition, for this investigation, three classification methods were used: artificial neural network, random forest, and decision tree. Furthermore, the findings revealed that the artificial neural network has a high predicting accuracy. The accuracy value stated is more than 0.85 for demand over time.;,citation_author=Wuttipong Kusonkhum;,citation_author=Korb Srinavin;,citation_author=Narong Leungbootnak;,citation_author=Tanayut Chaitongrat;,citation_editor=Yuan Gao;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_fulltext_html_url=https://www.hindawi.com/journals/jat/2022/8789067/;,citation_doi=10.1155/2022/8789067;,citation_issn=2042-3195, 0197-6729;,citation_volume=2022;,citation_journal_title=Journal of Advanced Transportation;">
<meta name="citation_reference" content="citation_title=Bus;,citation_author=Land Transport Authority;,citation_fulltext_html_url=https://www.lta.gov.sg/content/ltagov/en/who_we_are/our_work/public_transport_system/bus.html;">
<meta name="citation_reference" content="citation_title=Systematic comparison of trip distribution laws and models;,citation_author=Maxime Lenormand;,citation_author=Aleix Bassolas;,citation_author=José J. Ramasco;,citation_publication_date=2016-02;,citation_cover_date=2016-02;,citation_year=2016;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S0966692315002422;,citation_doi=10.1016/j.jtrangeo.2015.12.008;,citation_issn=09666923;,citation_volume=51;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=A separate modelling approach for short-term bus passenger flow prediction based on behavioural patterns: A hybrid decision tree method;,citation_author=Peng Li;,citation_author=Weitiao Wu;,citation_author=Xiangjing Pei;,citation_publication_date=2023-04;,citation_cover_date=2023-04;,citation_year=2023;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S037843712300122X;,citation_doi=10.1016/j.physa.2023.128567;,citation_issn=03784371;,citation_volume=616;,citation_journal_title=Physica A: Statistical Mechanics and its Applications;">
<meta name="citation_reference" content="citation_title=Holiday Passenger Flow Forecasting Based on the Modified Least-Square Support Vector Machine for the Metro System;,citation_author=Shasha Liu;,citation_author=Enjian Yao;,citation_publication_date=2017-02;,citation_cover_date=2017-02;,citation_year=2017;,citation_fulltext_html_url=https://ascelibrary.org/doi/10.1061/JTEPBS.0000010;,citation_issue=2;,citation_doi=10.1061/JTEPBS.0000010;,citation_issn=2473-2907, 2473-2893;,citation_volume=143;,citation_journal_title=Journal of Transportation Engineering, Part A: Systems;">
<meta name="citation_reference" content="citation_title=Towards semantic enrichment for spatial interactions;,citation_author=Yu Liu;,citation_author=Shengyin Wang;,citation_author=Xuechen Wang;,citation_author=Yunhao Zheng;,citation_author=Xiaojian Chen;,citation_author=Yang Xu;,citation_author=Chaogui Kang;,citation_publication_date=2024-04;,citation_cover_date=2024-04;,citation_year=2024;,citation_fulltext_html_url=https://www.tandfonline.com/doi/full/10.1080/19475683.2024.2324392;,citation_issue=2;,citation_doi=10.1080/19475683.2024.2324392;,citation_issn=1947-5683, 1947-5691;,citation_volume=30;,citation_journal_title=Annals of GIS;">
<meta name="citation_reference" content="citation_title=Buses will continue to play important role in public transport system;,citation_abstract=We refer to senior transport correspondent Christopher Tan’s commentary “Cutting bus services: Public transport changes must lead to better service, not just cost efficiency” (Feb 22). Read more at straitstimes.com.;,citation_author=Wai Keong Ng;,citation_publication_date=2024-03;,citation_cover_date=2024-03;,citation_year=2024;,citation_fulltext_html_url=https://www.straitstimes.com/opinion/forum/forum-buses-will-continue-to-play-important-role-in-public-transport-system;,citation_issn=0585-3923;,citation_journal_title=The Straits Times;">
<meta name="citation_reference" content="citation_title=Measuring accessibility using gravity and radiation models;,citation_abstract=Since the presentation of the radiation model, much work has been done to compare its findings with those obtained from gravitational models. These comparisons always aim at measuring the accuracy with which the models reproduce the mobility described by origin–destination matrices. This has been done at different spatial scales using different datasets, and several versions of the models have been proposed to adjust to various spatial systems. However, the models, to our knowledge, have never been compared with respect to policy testing scenarios. For this reason, here we use the models to analyse the impact of the introduction of a new transportation network, a bus rapid transport system, in the city of Teresina in Brazil. We do this by measuring the estimated variation in the trip distribution, and formulate an accessibility to employment indicator for the different zones of the city. By comparing the results obtained with the two approaches, we are able to not only better assess the goodness of fit and the impact of this intervention, but also understand reasons for the systematic similarities and differences in their predictions.;,citation_author=Duccio Piovani;,citation_author=Elsa Arcaute;,citation_author=Gabriela Uchoa;,citation_author=Alan Wilson;,citation_author=Michael Batty;,citation_publication_date=2018-09;,citation_cover_date=2018-09;,citation_year=2018;,citation_fulltext_html_url=https://royalsocietypublishing.org/doi/10.1098/rsos.171668;,citation_issue=9;,citation_doi=10.1098/rsos.171668;,citation_issn=2054-5703;,citation_volume=5;,citation_journal_title=Royal Society Open Science;">
<meta name="citation_reference" content="citation_title=Trip distribution modeling with Twitter data;,citation_author=Nastaran Pourebrahim;,citation_author=Selima Sultana;,citation_author=Amirreza Niakanlahiji;,citation_author=Jean-Claude Thill;,citation_publication_date=2019-09;,citation_cover_date=2019-09;,citation_year=2019;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S019897151930119X;,citation_doi=10.1016/j.compenvurbsys.2019.101354;,citation_issn=01989715;,citation_volume=77;,citation_journal_title=Computers, Environment and Urban Systems;">
<meta name="citation_reference" content="citation_title=Predicting commuter flows in spatial networks using a radiation model based on temporal ranges;,citation_author=Yihui Ren;,citation_author=Mária Ercsey-Ravasz;,citation_author=Pu Wang;,citation_author=Marta C. González;,citation_author=Zoltán Toroczkai;,citation_publication_date=2014-11;,citation_cover_date=2014-11;,citation_year=2014;,citation_fulltext_html_url=https://www.nature.com/articles/ncomms6347;,citation_issue=1;,citation_doi=10.1038/ncomms6347;,citation_issn=2041-1723;,citation_volume=5;,citation_journal_title=Nature Communications;">
<meta name="citation_reference" content="citation_title=An Interdisciplinary Survey on Origin-destination Flows Modeling: Theory and Techniques;,citation_abstract=Origin-destination~(OD) flow modeling is an extensively researched subject across multiple disciplines, such as the investigation of travel demand in transportation and spatial interaction modeling in geography. However, researchers from different fields tend to employ their own unique research paradigms and lack interdisciplinary communication, preventing the cross-fertilization of knowledge and the development of novel solutions to challenges. This article presents a systematic interdisciplinary survey that comprehensively and holistically scrutinizes OD flows from utilizing fundamental theory to studying the mechanism of population mobility and solving practical problems with engineering techniques, such as computational models. Specifically, regional economics, urban geography, and sociophysics are adept at employing theoretical research methods to explore the underlying mechanisms of OD flows. They have developed three influential theoretical models: the gravity model, the intervening opportunities model, and the radiation model. These models specifically focus on examining the fundamental influences of distance, opportunities, and population on OD flows, respectively. In the meantime, fields such as transportation, urban planning, and computer science primarily focus on addressing four practical problems: OD prediction, OD construction, OD estimation, and OD forecasting. Advanced computational models, such as deep learning models, have gradually been introduced to address these problems more effectively. Finally, based on the existing research, this survey summarizes current challenges and outlines future directions for this topic. Through this survey, we aim to break down the barriers between disciplines in OD flow-related research, fostering interdisciplinary perspectives and modes of thinking.;,citation_author=Can Rong;,citation_author=Jingtao Ding;,citation_author=Yong Li;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://arxiv.org/abs/2306.10048;,citation_doi=10.48550/ARXIV.2306.10048;,citation_publisher=arXiv;">
<meta name="citation_reference" content="citation_title=Spatial interaction modeling;,citation_editor=Sergio J. Rey;,citation_editor=Rachel Franklin;,citation_publication_date=2022-11;,citation_cover_date=2022-11;,citation_year=2022;,citation_fulltext_html_url=https://www.elgaronline.com/view/book/9781789903942/book-part-9781789903942-20.xml;,citation_doi=10.4337/9781789903942.00020;,citation_isbn=978-1-78990-394-2 978-1-78990-393-5;">
<meta name="citation_reference" content="citation_title=Spatial interaction modelling: A manifesto;,citation_author=Francisco Rowe;,citation_author=Robin Lovelace;,citation_author=Adam Dennett;,citation_editor=Levi John Wolf;,citation_editor=Richard Harris;,citation_editor=Alison Heppenstall;,citation_publication_date=2024-05;,citation_cover_date=2024-05;,citation_year=2024;,citation_fulltext_html_url=https://www.elgaronline.com/view/book/9781802203233/book-part-9781802203233-19.xml;,citation_doi=10.4337/9781802203233.00019;,citation_isbn=978-1-80220-323-3 978-1-80220-322-6;,citation_inbook_title=A Research Agenda for Spatial Analysis;">
<meta name="citation_reference" content="citation_title=A Deep Gravity model for mobility flows generation;,citation_abstract=Abstract The movements of individuals within and among cities influence critical aspects of our society, such as well-being, the spreading of epidemics, and the quality of the environment. When information about mobility flows is not available for a particular region of interest, we must rely on mathematical models to generate them. In this work, we propose Deep Gravity, an effective model to generate flow probabilities that exploits many features (e.g., land use, road network, transport, food, health facilities) extracted from voluntary geographic data, and uses deep neural networks to discover non-linear relationships between those features and mobility flows. Our experiments, conducted on mobility flows in England, Italy, and New York State, show that Deep Gravity achieves a significant increase in performance, especially in densely populated regions of interest, with respect to the classic gravity model and models that do not use deep neural networks or geographic data. Deep Gravity has good generalization capability, generating realistic flows also for geographic areas for which there is no data availability for training. Finally, we show how flows generated by Deep Gravity may be explained in terms of the geographic features and highlight crucial differences among the three considered countries interpreting the model’s prediction with explainable AI techniques.;,citation_author=Filippo Simini;,citation_author=Gianni Barlacchi;,citation_author=Massimilano Luca;,citation_author=Luca Pappalardo;,citation_publication_date=2021-11;,citation_cover_date=2021-11;,citation_year=2021;,citation_fulltext_html_url=https://www.nature.com/articles/s41467-021-26752-4;,citation_issue=1;,citation_doi=10.1038/s41467-021-26752-4;,citation_issn=2041-1723;,citation_volume=12;,citation_journal_title=Nature Communications;">
<meta name="citation_reference" content="citation_title=Gravity Model of Migration: W.J. Reilly and G.K. Zipf;,citation_author=Kulwinder Singh;,citation_fulltext_html_url=https://pangeography.com/gravity-model-of-migration-w-j-reilly-and-g-k-zipf/;,citation_journal_title=Pan Geography;">
<meta name="citation_reference" content="citation_title=Theory of Intervening Opportunities by S.A. Stouffer;,citation_abstract=S. A. Stouffer presented his ideas in his work &amp;amp;amp;quot;Intervening Opportunities: A Theory Relating Mobility and Distance&amp;quot; in year 1940.;,citation_author=Kulwinder Singh;,citation_publication_date=2023-02;,citation_cover_date=2023-02;,citation_year=2023;,citation_fulltext_html_url=https://pangeography.com/theory-of-intervening-opportunities/;,citation_journal_title=Pan Geography;">
<meta name="citation_reference" content="citation_title=A geographically weighted deep neural network model for research on the spatial distribution of the down dead wood volume in Liangshui National Nature Reserve (China);,citation_author=Y Sun;,citation_author=Z Ao;,citation_author=W Jia;,citation_author=Y Chen;,citation_author=K Xu;,citation_publication_date=2021-08;,citation_cover_date=2021-08;,citation_year=2021;,citation_fulltext_html_url=https://iforest.sisef.org/?doi=ifor3705-014;,citation_issue=4;,citation_doi=10.3832/ifor3705-014;,citation_issn=19717458;,citation_volume=14;,citation_journal_title=iForest - Biogeosciences and Forestry;">
<meta name="citation_reference" content="citation_title=Identifying, Analyzing, and forecasting commuting patterns in urban public Transportation: A review;,citation_author=Jingwen Xiong;,citation_author=Lunhui Xu;,citation_author=Zhuoyan Wei;,citation_author=Pan Wu;,citation_author=Qianwen Li;,citation_author=Mingyang Pei;,citation_publication_date=2024-09;,citation_cover_date=2024-09;,citation_year=2024;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S0957417424005128;,citation_doi=10.1016/j.eswa.2024.123646;,citation_issn=09574174;,citation_volume=249;,citation_journal_title=Expert Systems with Applications;">
<meta name="citation_reference" content="citation_title=Geographically weighted regression with the integration of machine learning for spatial prediction;,citation_author=Wentao Yang;,citation_author=Min Deng;,citation_author=Jianbo Tang;,citation_author=Liang Luo;,citation_publication_date=2023-04;,citation_cover_date=2023-04;,citation_year=2023;,citation_fulltext_html_url=https://link.springer.com/10.1007/s10109-022-00387-5;,citation_issue=2;,citation_doi=10.1007/s10109-022-00387-5;,citation_issn=1435-5930, 1435-5949;,citation_volume=25;,citation_journal_title=Journal of Geographical Systems;">
<meta name="citation_reference" content="citation_title=Learning Mobility Flows from Urban Features with Spatial Interaction Models and Neural Networks;,citation_author=Gevorg Yeghikyan;,citation_author=Felix L. Opolka;,citation_author=Mirco Nanni;,citation_author=Bruno Lepri;,citation_author=Pietro Lio;,citation_publication_date=2020-09;,citation_cover_date=2020-09;,citation_year=2020;,citation_fulltext_html_url=https://ieeexplore.ieee.org/document/9239613/;,citation_doi=10.1109/SMARTCOMP50058.2020.00028;,citation_isbn=978-1-72816-997-2;,citation_conference_title=2020 IEEE International Conference on Smart Computing (SMARTCOMP);,citation_conference=IEEE;">
<meta name="citation_reference" content="citation_title=Creating liveable cities through car-lite urban mobility;,citation_editor=Centre for Liveable Cities, Singapore;,citation_editor=Urban Land Institute;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_isbn=978-981-11-1135-8;">
<meta name="citation_reference" content="citation_title=Land Transport Master Plan 2040;,citation_author=Land Transport Authority;,citation_publication_date=2019-05;,citation_cover_date=2019-05;,citation_year=2019;,citation_fulltext_html_url=https://www.lta.gov.sg/content/dam/ltagov/who_we_are/our_work/land_transport_master_plan_2040/pdf/LTA%20LTMP%202040%20eReport.pdf;,citation_technical_report_institution=Land Transport Authority;">
<meta name="citation_reference" content="citation_title=Land Transport Master Plan 2013;,citation_author=Land Transport Authority;,citation_publication_date=2013-10;,citation_cover_date=2013-10;,citation_year=2013;,citation_fulltext_html_url=https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP2013Report.pdf;,citation_technical_report_institution=Land Transport Authority;">
<meta name="citation_reference" content="citation_title=Land Transport Master Plan 2008;,citation_author=Land Transport Authority;,citation_publication_date=2008-02;,citation_cover_date=2008-02;,citation_year=2008;,citation_fulltext_html_url=https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP-Report.pdf;,citation_technical_report_institution=Land Transport Authority;">
<meta name="citation_reference" content="citation_title=Human mobility: Models and applications;,citation_author=Hugo Barbosa;,citation_author=Marc Barthelemy;,citation_author=Gourab Ghoshal;,citation_author=Charlotte R. James;,citation_author=Maxime Lenormand;,citation_author=Thomas Louail;,citation_author=Ronaldo Menezes;,citation_author=José J. Ramasco;,citation_author=Filippo Simini;,citation_author=Marcello Tomasini;,citation_publication_date=2018-03;,citation_cover_date=2018-03;,citation_year=2018;,citation_fulltext_html_url=https://linkinghub.elsevier.com/retrieve/pii/S037015731830022X;,citation_doi=10.1016/j.physrep.2018.01.001;,citation_issn=03701573;,citation_volume=734;,citation_journal_title=Physics Reports;">
<meta name="citation_reference" content="citation_title=Intervening Opportunities: A Theory Relating Mobility and Distance;,citation_author=Samuel A. Stouffer;,citation_publication_date=1940-12;,citation_cover_date=1940-12;,citation_year=1940;,citation_fulltext_html_url=http://www.jstor.org/stable/2084520?origin=crossref;,citation_issue=6;,citation_doi=10.2307/2084520;,citation_issn=00031224;,citation_volume=5;,citation_journal_title=American Sociological Review;">
<meta name="citation_reference" content="citation_title=The P 1 P 2 D Hypothesis: On the Intercity Movement of Persons;,citation_author=George Kingsley Zipf;,citation_publication_date=1946-12;,citation_cover_date=1946-12;,citation_year=1946;,citation_fulltext_html_url=http://www.jstor.org/stable/2087063?origin=crossref;,citation_issue=6;,citation_doi=10.2307/2087063;,citation_issn=00031224;,citation_volume=11;,citation_journal_title=American Sociological Review;">
<meta name="citation_reference" content="citation_title=An introduction to trend surface analysis;,citation_author=D. Unwin;,citation_publication_date=1975;,citation_cover_date=1975;,citation_year=1975;,citation_isbn=978-0-902246-51-5;,citation_series_title=Concepts and techniques in modern geography ; no. 5;">
<meta name="citation_reference" content="citation_title=An Empirical Study of Some Spatial Interaction Models;,citation_abstract=This paper attempts to focus attention away from a mathematical and theoretical perspective to one where empirical and statistical aspects can assume greater significance. The need for this change of emphasis is demonstrated by the results of an empirical study of a selection of nine spatial-interaction models. Not only do the theory-based models fail to achieve significantly better levels of performance than some empirically derived models, but both types of model fail to achieve satisfactory levels of descriptive performance. These models are shown to be sensitive to the choice of calibration procedure and various kinds of errors in the constant and independent variables. It is suggested that the use of these models should always be accompanied by estimates of confidence limits, and that there is an urgent need for the development of new model designs which can at least provide accurate descriptions of observed reality.;,citation_author=S Openshaw;,citation_publication_date=1976-02;,citation_cover_date=1976-02;,citation_year=1976;,citation_fulltext_html_url=http://journals.sagepub.com/doi/10.1068/a080023;,citation_issue=1;,citation_doi=10.1068/a080023;,citation_issn=0308-518X, 1472-3409;,citation_volume=8;,citation_journal_title=Environment and Planning A: Economy and Space;">
<meta name="citation_reference" content="citation_title=Some Theoretical and Applied Aspects of Spatial Interaction Shopping Models;,citation_author=Stan Openshaw;,citation_publication_date=1975;,citation_cover_date=1975;,citation_year=1975;,citation_isbn=978-0-902246-51-5;,citation_volume=4;,citation_series_title=Concepts and techniques in modern geography;">
<meta name="citation_reference" content="citation_title=Spatial Interaction Modeling;,citation_author=Taylor Oshan;,citation_editor=Sergio J. Rey;,citation_editor=Rachel Franklin;,citation_publication_date=2022-11;,citation_cover_date=2022-11;,citation_year=2022;,citation_fulltext_html_url=https://www.elgaronline.com/view/book/9781789903942/book-part-9781789903942-20.xml;,citation_doi=10.4337/9781789903942.00020;,citation_isbn=978-1-78990-394-2 978-1-78990-393-5;,citation_inbook_title=Handbook of Spatial Analysis in the Social Sciences;">
<meta name="citation_reference" content="citation_inbook_title=undefined;">
<meta name="citation_reference" content="citation_inbook_title=undefined;">
<meta name="citation_reference" content="citation_title=Spatial interaction models: Formulations and applications;,citation_author=A. Stewart Fotheringham;,citation_author=Morton E. O’Kelly;,citation_publication_date=1989;,citation_cover_date=1989;,citation_year=1989;,citation_isbn=978-0-7923-0021-2;,citation_series_title=Studies in operational regional science;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Comparative Analysis Of Non-Spatial and Spatial Approaches In Statistical And Machine Learning Methods for Predicting Singapore Bus Commuter Flows</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                        <p>Goh Si Hui <a href="mailto:sihui.goh.2022@mitb.smu.edu.sg" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
                      </div>
          </div>
                
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">September 1, 2024</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (agu)</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>

    <div>
      <div class="abstract">
        <div class="block-title">Abstract</div>
        <p><to be="" updated=""></to></p>
      </div>
    </div>

    <div>
      <div class="keywords">
        <div class="block-title">Keywords</div>
        <p>Commuter flows, Gravity Model, Bus, Singapore</p>
      </div>
    </div>

    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#importance-of-public-transport-in-singapore" id="toc-importance-of-public-transport-in-singapore" class="nav-link" data-scroll-target="#importance-of-public-transport-in-singapore"><span class="header-section-number">1.1</span> Importance of Public Transport in Singapore</a></li>
  <li><a href="#importance-of-buses-in-singapore-public-transport" id="toc-importance-of-buses-in-singapore-public-transport" class="nav-link" data-scroll-target="#importance-of-buses-in-singapore-public-transport"><span class="header-section-number">1.2</span> Importance of Buses in Singapore Public Transport</a></li>
  </ul></li>
  <li><a href="#problem-statement-and-objectives" id="toc-problem-statement-and-objectives" class="nav-link" data-scroll-target="#problem-statement-and-objectives"><span class="header-section-number">2</span> Problem Statement and Objectives</a></li>
  <li><a href="#preliminary-literature-review" id="toc-preliminary-literature-review" class="nav-link" data-scroll-target="#preliminary-literature-review"><span class="header-section-number">3</span> Preliminary Literature Review</a>
  <ul class="collapse">
  <li><a href="#theories-explaining-human-commuting-patterns" id="toc-theories-explaining-human-commuting-patterns" class="nav-link" data-scroll-target="#theories-explaining-human-commuting-patterns"><span class="header-section-number">3.1</span> Theories Explaining Human Commuting Patterns</a></li>
  <li><a href="#methods-for-calibrating-gravity-models" id="toc-methods-for-calibrating-gravity-models" class="nav-link" data-scroll-target="#methods-for-calibrating-gravity-models"><span class="header-section-number">3.2</span> Methods for Calibrating Gravity Models</a></li>
  </ul></li>
  <li><a href="#research-design-and-methods" id="toc-research-design-and-methods" class="nav-link" data-scroll-target="#research-design-and-methods"><span class="header-section-number">4</span> Research Design and Methods</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">4.1</span> Data</a></li>
  <li><a href="#methods-and-r-packages" id="toc-methods-and-r-packages" class="nav-link" data-scroll-target="#methods-and-r-packages"><span class="header-section-number">4.2</span> Methods and R Packages</a></li>
  </ul></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule"><span class="header-section-number">5</span> Schedule</a></li>
  <li><a href="#conclusions-and-contributions" id="toc-conclusions-and-contributions" class="nav-link" data-scroll-target="#conclusions-and-contributions"><span class="header-section-number">6</span> Conclusions and Contributions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="notebooks\esda-busstops-preview.html"><i class="bi bi-journal-code"></i>Exploratory Data Analysis for Bus Stop Locations</a></li><li><a href="notebooks\edsa-business2-preview.html"><i class="bi bi-journal-code"></i>Exploratory Data Analysis for Business Data</a></li><li><a href="notebooks\esda-population2-preview.html"><i class="bi bi-journal-code"></i>Exploratory Data Analysis for Population Data</a></li><li><a href="notebooks\esda-spatialflows-preview.html"><i class="bi bi-journal-code"></i>Exploratory Data Analysis for Spatial Flows Data</a></li><li><a href="notebooks\explore-busstops-preview.html"><i class="bi bi-journal-code"></i>Exploring Origin - Destination Bus Stops Flows</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<section id="importance-of-public-transport-in-singapore" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="importance-of-public-transport-in-singapore"><span class="header-section-number">1.1</span> Importance of Public Transport in Singapore</h3>
<p>In 2023, Singapore’s total population was at 5.9 million and it was projected to grow steadily to about 6.9 million by 2030 <span class="citation" data-cites="centre_for_liveable_cities_singapore_creating_2016">(<a href="#ref-centre_for_liveable_cities_singapore_creating_2016" role="doc-biblioref">Centre for Liveable Cities, Singapore &amp; Urban Land Institute, 2016</a>)</span>. With a growing population, there is fierce competition for land in land-scarce Singapore. Currently, the transport infrastructure has already taken up 12% of Singapore’s land space, which is almost the same amount as the land space allocated for housing (14%) <span class="citation" data-cites="centre_for_liveable_cities_singapore_creating_2016">(<a href="#ref-centre_for_liveable_cities_singapore_creating_2016" role="doc-biblioref">Centre for Liveable Cities, Singapore &amp; Urban Land Institute, 2016</a>)</span>. In the long term, it is not feasible nor sustainable to allocate more land for roads and parking lots in land-scarce Singapore. With these considerations, Singapore has been advocating ‘car-lite’ policies and building an efficient, reliable and accessible public transport system since 1960s. As a result, in 2020, close to 60% of the employed residents in Singapore took combinations of bus, Mass Rapid Transit (MRT) or Light Rail Transit (LRT) to work <span class="citation" data-cites="kok_more_2021">(<a href="#ref-kok_more_2021" role="doc-biblioref">Kok, 2021</a>)</span>.</p>
<p>With a large proportion of the population relying on the public transportation system, and along with the government’s ‘car-lite’ policies, it is essential to ensure that the public transportation system can meet the demands of the growing population. To meet the increasing demands, transport planners and providers would need to be able to accurately predict the commuter flows to allocate the necessary resources. Failure to estimate the commuter flow accurately could lead to serious consequences because transportation infrastructure and resources are costly and take time to prepare. For example, underestimating demand for a bus service could lead to residents’ unhappiness and overcrowding of buses during peak periods. Overestimating demand for a bus service could lead to wastage of public resources as the bus would be empty most of the time.</p>
</section>
<section id="importance-of-buses-in-singapore-public-transport" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="importance-of-buses-in-singapore-public-transport"><span class="header-section-number">1.2</span> Importance of Buses in Singapore Public Transport</h3>
<p>In 2009, Singapore’s Land Transport Authority (LTA) undertook the role of the central bus network planner to enhance the hub-and-spoke system so that the bus and rail services work in partnership <span class="citation" data-cites="land_transport_authority_land_2008">(<a href="#ref-land_transport_authority_land_2008" role="doc-biblioref">Land Transport Authority, 2008</a>)</span>. Since then, more buses services have been provided, and existing bus routes were improved. LTA also reduced the waiting time and crowding density by improving bus frequency <span class="citation" data-cites="land_transport_authority_land_2013">(<a href="#ref-land_transport_authority_land_2013" role="doc-biblioref">Land Transport Authority, 2013</a>)</span> ; <span class="citation" data-cites="land_transport_authority_land_2019">(<a href="#ref-land_transport_authority_land_2019" role="doc-biblioref">Land Transport Authority, 2019</a>)</span>. To be able to achieve such outcomes, the ability to predict demand for buses at the different origin and destination bus stops across different times of the day is important. While the recent land transport master plan published in 2019 focused on further expansion of the rail network, we are of the view that planning for bus transit is still important. This is because new housing estates such as Tengah and upcoming Paya Lebar and Southern Waterfront housing estates are being built and these new residential estates would change the demand and supply of commuters and eventually alter the commuter flows at the origin and destination bus stops. In addition, when commuters’ travelling decisions change, more new bus routes would need to be added, and existing bus routes would need to change. Therefore, to anticipate such changes, the ability to predict demand at various origin and destination bus stops during different times of the day is important. With this in mind, we will be focusing on bus commuter flows for this study.</p>
</section>
</section>
<section id="problem-statement-and-objectives" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="problem-statement-and-objectives"><span class="header-section-number">2</span> Problem Statement and Objectives</h2>
<p>Despite the relevance and importance of bus transit to Singapore’s public transportation, the planning and predicting bus demand in Singapore can be done more proactively. Based on our observations and the land transport masterplans, it seemed that the current practice of predicting and planning for bus transit demand is reactive and usually done when there are new residential towns, new MRT lines or stations, or after receiving public feedback. There are also limited research on predicting Singapore bus commuter flows, and few studies had been done to compare the different methods used to predict Singapore bus commuter flows.&nbsp; In addition, past research studies tend to focus on the use of conventional non-spatial statistical learning and machine learning methods in building predictive models. On the other hand, empirical evidence shows that public bus transit demand is non-stationary spatially and is very much affected by the geographical factors at the demand and supply locations.&nbsp; In view of this, this capstone project aims to explore and compare the appropriateness of non-spatial and spatial statistical and machine learning methods to predict Singapore bus commuter flows.</p>
<p>Our proposed study can provide value in four-folds:</p>
<p>1.&nbsp;&nbsp;&nbsp;&nbsp; illustrate how different non-spatial and spatial approaches in statistical and machine learning methods could be applied to bus commuter flows in Singapore’s context,</p>
<p>2.&nbsp;&nbsp;&nbsp;&nbsp; shed light on the strengths and weaknesses of different methods to predict Singapore bus commuter flows, which would be insightful for planners when they want to apply these methods to predict Singapore bus commuter flows,</p>
<p>3.&nbsp;&nbsp;&nbsp;&nbsp; enrich the existing limited research on predicting bus commuter flows in Singapore, and,</p>
<p>4.&nbsp;&nbsp;&nbsp;&nbsp; contribute to the existing studies on incorporating spatial component when using statistical or machine learning methods to predict commuter flows.&nbsp;</p>
</section>
<section id="preliminary-literature-review" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="preliminary-literature-review"><span class="header-section-number">3</span> Preliminary Literature Review</h2>
<section id="theories-explaining-human-commuting-patterns" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="theories-explaining-human-commuting-patterns"><span class="header-section-number">3.1</span> Theories Explaining Human Commuting Patterns</h3>
<section id="intervening-opportunities-model" class="level4" data-number="3.1.1">
<h4 data-number="3.1.1" class="anchored" data-anchor-id="intervening-opportunities-model"><span class="header-section-number">3.1.1</span> Intervening Opportunities Model</h4>
<p><span class="citation" data-cites="stouffer_intervening_1940">Stouffer (<a href="#ref-stouffer_intervening_1940" role="doc-biblioref">1940</a>)</span> proposed a conceptual framework that rather than distance, it is the number of intervening opportunities or the cumulative number of opportunities between the origin and destination that determines migration. In the Intervening Opportunities (IO) model proposed by <span class="citation" data-cites="stouffer_intervening_1940">(<a href="#ref-stouffer_intervening_1940" role="doc-biblioref">Stouffer, 1940</a>)</span>, the number of persons going a given distance is directly proportional to the number of opportunities at that distance and inversely proportional to the number of intervening opportunities.</p>
<p>The traditional form of the IO model is usually given by Schneider’s version of Stouffer’s model, which states that the probability that a trip ends in a given location is equal to the probability that this location offers an acceptable opportunity times the probability that an acceptable opportunity in another location closer to the origin of the trips has not been chosen <span class="citation" data-cites="barbosa_human_2018">(<a href="#ref-barbosa_human_2018" role="doc-biblioref">Barbosa et al., 2018</a>)</span>. The flow <span class="math inline">\(T_{ij}\)</span> from the origin location <span class="math inline">\(i\)</span> to the <span class="math inline">\(j\)</span>-th location ranked by travel cost from <span class="math inline">\(i\)</span> is given by the following equation:</p>
<p><span class="math display">\[
T_{ij} = O_i\frac{e^{-LV_{ij-1}}-e^{-LV_{ij}}}{1-e^{-LV_{in}}}
\]</span></p>
<p>Where <span class="math inline">\(O_i\)</span> is the total number of trips originating from <span class="math inline">\(i\)</span> and the second term represents the probability that one of these trips ends in location <span class="math inline">\(j\)</span>. In the second term, the denominator is a normalisation factor to ensure that the probabilities sum to 1. <span class="math inline">\(V_{ij}\)</span> is the cumulative number of opportunities up to the <span class="math inline">\(j\)</span>-th location ranked by travel cost from the origin location <span class="math inline">\(i\)</span> (and <span class="math inline">\(n\)</span> is the total number of locations in the region considered). <span class="math inline">\(L\)</span> is a constant probability of accepting an opportunities destination.</p>
<table class="caption-top table">
<caption>Figure 1 - Illustration of Intervening Opportunities Model</caption>
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;">(A)</td>
<td style="text-align: center;">(B)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><img src="images/IOModel_1.png" width="311" height="244" alt="Figure 1(A) illustrates that the geographical extent of intervenining opportunities is based on the distance between origin i and destination j."></td>
<td style="text-align: center;"><img src="images/IOModel_2.png" width="340" height="244" alt="Figure 1(B) shows that the intervening opportunities Vij is composed of the cumulative population of areas in the order of near they are to the origin (i.e.&nbsp;destination a is nearest to origin i, followed by b then c)."></td>
</tr>
</tbody>
</table>
<blockquote class="blockquote">
<p>Figure 1(A) illustrates that the geographical extent of intervenining opportunities is based on the distance between origin <span class="math inline">\(i\)</span> and destination <span class="math inline">\(j\)</span>. Figure 1(B) shows that the intervening opportunities <span class="math inline">\(V_{ij}\)</span> is composed of the cumulative population of areas in the order of near they are to the origin (i.e.&nbsp;destination <span class="math inline">\(a\)</span> is nearest to origin <span class="math inline">\(i\)</span> , followed by <span class="math inline">\(b\)</span> then <span class="math inline">\(c\)</span> ).</p>
</blockquote>
<p>The gravity and the IO models had been compared in various studies, showing that in general, both models performed comparably <span class="citation" data-cites="barbosa_human_2018">(<a href="#ref-barbosa_human_2018" role="doc-biblioref">Barbosa et al., 2018</a>)</span>. Despite relatively good performances, the IO model was less popular, which is mainly due to the lack of research effort into the implementation and calibration of the model.</p>
</section>
<section id="gravity-model" class="level4" data-number="3.1.2">
<h4 data-number="3.1.2" class="anchored" data-anchor-id="gravity-model"><span class="header-section-number">3.1.2</span> Gravity Model</h4>
<p>As cited by <span class="citation" data-cites="barbosa_human_2018">Barbosa et al. (<a href="#ref-barbosa_human_2018" role="doc-biblioref">2018</a>)</span>, <span class="citation" data-cites="zipf_p_1946">Zipf (<a href="#ref-zipf_p_1946" role="doc-biblioref">1946</a>)</span> proposed an equation to calculate mobility flows inspired by Newton’s law of gravitation and highlighted the importance of distance in human migration patterns where the magnitude <span class="math inline">\(T_{ij}\)</span> of a migratory flow between two communities <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> can be approximated by the following equation:</p>
<p><span class="math display">\[
T_{ij} &nbsp;\propto \frac{P_iP_j}{r_{ij}}
\]</span></p>
<p>Where <span class="math inline">\(P_i\)</span> and <span class="math inline">\(P_i\)</span> are the respective populations at locations <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> and <span class="math inline">\(r_{ij}\)</span> is the distance between locations <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<table class="caption-top table">
<caption>Figure 2 - Illustration of the Gravity Model</caption>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="images/GravityModel.png" class="img-fluid" width="318"></td>
</tr>
</tbody>
</table>
<blockquote class="blockquote">
<p>In the above figure, <em>i</em> is the origin, <em>j</em> and <em>a</em> are both possible destinations. In gravity model, if both destinations’ populations are the same, the population at <em>i</em> would have a higher tendency to move towards a destination that is nearer (i.e.&nbsp;destination <em>j</em> because it is shorter distance away from <em>i</em>).</p>
</blockquote>
<p>The basic assumptions of the gravity model are that the number of trips leaving <span class="math inline">\(i\)</span> is proportional to its population (<span class="math inline">\(P_i\)</span>), and the attractivity of <span class="math inline">\(j\)</span> is proportional to <span class="math inline">\(P_j\)</span>, and that there is a cost effect in terms of the distance travelled. This can be generalised into the following relationship:</p>
<p><span class="math display">\[
T_{ij} = Km_im_jf(r_{ij})
\]</span></p>
<p>Where <span class="math inline">\(K\)</span> is a constant, the masses <span class="math inline">\(m_i\)</span> and <span class="math inline">\(m_j\)</span> related to the number of trips leaving <span class="math inline">\(i\)</span> or the ones attracted by <span class="math inline">\(j\)</span> , and <span class="math inline">\(f(r_{ij})\)</span> is a decreasing function of distance.</p>
<p>The optimal form of the distance function <span class="math inline">\(f(r_{ij})\)</span> may change based on the purpose of the trips, the spatial granularity of the locations, and the transportation model. The gravity model’s ability to estimate trip-flows, which in turn allows us to estimate traffic demand between two different locations as a function of their local properties led it to be a popular model in transport planning.</p>
<p>However, the gravity model simplifies travel flows and is unable to capture actual empirical observations <span class="citation" data-cites="barbosa_human_2018">(<a href="#ref-barbosa_human_2018" role="doc-biblioref">Barbosa et al., 2018</a>)</span>. The gravity model also requires calibration of several free parameters, which make it sensitive to fluctuations or incompleteness in data <span class="citation" data-cites="barbosa_human_2018">(<a href="#ref-barbosa_human_2018" role="doc-biblioref">Barbosa et al., 2018</a>)</span>. Some of the limitations in the gravity model can be addressed using certain constrained versions. For example, the number of people originating from location <span class="math inline">\(i\)</span> (<span class="math inline">\(O_i\)</span>) can be constrained, resulting it in a singly-constrained gravity model. When both the number of people originating from location <span class="math inline">\(i\)</span> and the number of travellers arriving at destination <span class="math inline">\(j\)</span> (<span class="math inline">\(D_j\)</span>) are constrained, it gives rise to a doubly-constrained gravity model.</p>
</section>
<section id="radiation-model" class="level4" data-number="3.1.3">
<h4 data-number="3.1.3" class="anchored" data-anchor-id="radiation-model"><span class="header-section-number">3.1.3</span> Radiation Model</h4>
<p>Arising from the IO model, the radiation model assumes that the choice of a traveler’s destination consists of two steps: (1) each opportunity in every location is assigned a fitness represented by a number, <span class="math inline">\(z\)</span>, chosen from some distribution <span class="math inline">\(p(z)\)</span>, whose value represents the quality of the opportunity for the traveler, and (2) the traveler ranks all opportunities according to their distances from the origin location and chooses the closest opportunity with a fitness higher than the traveler’s fitness threshold, which is another random number extracted from the fitness distribution <span class="math inline">\(p(z)\)</span> <span class="citation" data-cites="barbosa_human_2018">(<a href="#ref-barbosa_human_2018" role="doc-biblioref">Barbosa et al., 2018</a>)</span>. As a result, the average number of travelers from location <span class="math inline">\(i\)</span> to location <span class="math inline">\(j\)</span>, <span class="math inline">\(T_{ij}\)</span>, takes the form:</p>
<p><span class="math display">\[
T_{ij} = O_i \frac{1}{1- \frac{m_i}{M}} \frac{m_im_j}{(m_i +s_{ij})(m_i+m_j+s_{ij})}
\]</span></p>
<p>The destination of the <span class="math inline">\(O_i\)</span> trips originating in <span class="math inline">\(i\)</span> is sampled from a distribution of probabilities that a trip originating in <span class="math inline">\(i\)</span> ends in location <span class="math inline">\(j\)</span>. This probability depends on the number of opportunities at the origin <span class="math inline">\(m_i\)</span>, the number of opportunities at the destination <span class="math inline">\(m_j\)</span>, and the number of opportunities <span class="math inline">\(s_{ij}\)</span> in a circle of radius <span class="math inline">\(r_{ij}\)</span> centered in <span class="math inline">\(i\)</span> (excluding the source and destination). This conditional probability needs to be normalised so that the probability that a trip originating in the region of interest ends in this region is equal to 1. In case of a finite system, it is possible to show that this is equal to <span class="math inline">\(1 - \frac{m_i}{M}\)</span> where <span class="math inline">\(M = \sum i m_i\)</span> is the total number of opportunities. The advantage of the radiation model over gravity model is the absence of a parameter to calibrate with observed data. However, the absence of parameters also caused the model to be less robust to changes in the spatial scale. To overcome this, some studies proposed to extend the radiation model with opportunities’ selection.</p>
<p>For this project, we are interested in the calibration of gravity models. While gravity models simplify travel flows, there are more past studies done on gravity models as compared to the other models. In addition, <span class="citation" data-cites="lenormand_systematic_2016">Lenormand et al. (<a href="#ref-lenormand_systematic_2016" role="doc-biblioref">2016</a>)</span> compared the performance of the gravity model, radiation model and Schneider’s IO model and found that the gravity approach not only outperforms the other models when it comes to estimating the commuting flows but also best preserves the commuting network structure and the fit of the commuting distance distribution.</p>
</section>
</section>
<section id="methods-for-calibrating-gravity-models" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="methods-for-calibrating-gravity-models"><span class="header-section-number">3.2</span> Methods for Calibrating Gravity Models</h3>
<p>According to <span class="citation" data-cites="openshaw_theoretical_1975">Openshaw (<a href="#ref-openshaw_theoretical_1975" role="doc-biblioref">1975</a>)</span>, as cited by <span class="citation" data-cites="wolf_spatial_2024">Rowe et al. (<a href="#ref-wolf_spatial_2024" role="doc-biblioref">2024</a>)</span>, calibration is the process of providing estimates of the unknown parameters we have identified as the independent variables of the gravity model. For example, in a basic gravity model, we would need to estimate the origin mass, destination mass and a parameter determining the frictional effect of spatial separation between origins and destinations.</p>
<section id="statistical-methods" class="level4" data-number="3.2.1">
<h4 data-number="3.2.1" class="anchored" data-anchor-id="statistical-methods"><span class="header-section-number">3.2.1</span> Statistical Methods</h4>
<p>Regression is one of the commonly used statistical methods to calibrate gravity models <span class="citation" data-cites="oshan_spatial_2022">(<a href="#ref-oshan_spatial_2022" role="doc-biblioref">Oshan, 2022</a>)</span>. To calibrate an unconstrained gravity model using regression, it can be transformed into a linear format by taking logarithms of both sides of the equation, which gives us the log-linear gravity model. This model can be expressed as a log-normal regression specification and included within an ordinary least-squares regression specification <span class="citation" data-cites="fotheringham_spatial_1989">(<a href="#ref-fotheringham_spatial_1989" role="doc-biblioref">Fotheringham &amp; O’Kelly, 1989</a>)</span>; <span class="citation" data-cites="oshan_spatial_2022">(<a href="#ref-oshan_spatial_2022" role="doc-biblioref">Oshan, 2022</a>)</span>. Some studies also proposed to use Poisson regression for gravity models instead of ordinary least squares regression because flows are usually counts of people or objects, and hence should be modeled as discrete entities, and Poisson regression also avoids the potential issues of taking the logarithm of zero-valued flows <span class="citation" data-cites="oshan_spatial_2022">(<a href="#ref-oshan_spatial_2022" role="doc-biblioref">Oshan, 2022</a>)</span>. Other statistical methods to calibrate gravity models include negative binomial distribution or zero-inflated extension to overcome the weaknesses of Poisson models, which are vulnerable to excessive zero flows and overdispersion. However, studies found that statistical methods are unable to account for nonlinearities and other irregularities in data, which could weaken the predictive ability of these models. Statistical methods assumed that origin-destination (OD) flows are normally distributed, but in reality, OD flows are usually not distributed normally and contain a large number of zero flows, resulting a sparse matrix, which make it incompatible with statistical methods such as ordinary least squares regression <span class="citation" data-cites="yeghikyan_learning_2020">(<a href="#ref-yeghikyan_learning_2020" role="doc-biblioref">Yeghikyan et al., 2020</a>)</span>.</p>
</section>
<section id="machine-learning-based-methods" class="level4" data-number="3.2.2">
<h4 data-number="3.2.2" class="anchored" data-anchor-id="machine-learning-based-methods"><span class="header-section-number">3.2.2</span> Machine Learning Based Methods</h4>
<p>Increasingly, there are studies that make use of machine learning based methods to calibrate gravity models and found that these methods performed better than statistical models. Examples of machine learning methods include decision trees, random forests, Support Vector Machines, and neural networks. For example, <span class="citation" data-cites="ding_predicting_2016">Ding et al. (<a href="#ref-ding_predicting_2016" role="doc-biblioref">2016</a>)</span> improved the predictions for short term subway ridership by using Gradient Boosting decision trees to capture the associations with the independent variables. Their study found that gradient boosting approach can incorporate different types of predictors, fix complex nonlinear relationships, and handle the multicollinearity effect with high accuracy. <span class="citation" data-cites="pourebrahim_trip_2019">Pourebrahim et al. (<a href="#ref-pourebrahim_trip_2019" role="doc-biblioref">2019</a>)</span> found that with the integration of traditional and social media data, as compared to traditional gravity and artificial neural network models, the random forest model the highest <span class="math inline">\(R^2\)</span> and lowest Mean Squared Error (MSE) when it comes to modelling trip distributions. <span class="citation" data-cites="chen_use_2011">Chen et al. (<a href="#ref-chen_use_2011" role="doc-biblioref">2011</a>)</span> made use of Least Squares Support Vector Machine (LS-SVM) to predict passenger flows for certain bus routes in Changchun and found that the predicted flow and actual flow had little difference and the majority of the equal coefficients of a training set are larger than 0.90, which shows the validity of the approach in using LS-SVM. <span class="citation" data-cites="kusonkhum_using_2022">Kusonkhum et al. (<a href="#ref-kusonkhum_using_2022" role="doc-biblioref">2022</a>)</span> found that as compared to random forests and decision tree, artificial neural network has a higher predictive accuracy when it comes to predicting metro passenger demand over time. <span class="citation" data-cites="simini_deep_2021">Simini et al. (<a href="#ref-simini_deep_2021" role="doc-biblioref">2021</a>)</span> proposed Deep Gravity, which is a model to generate flow probabilities that exploits various features extracted from voluntary geographic data (such as land use, transport facilities) and uses deep neural networks to discover non-linear relationships between those features and mobility flows. They found that as compared to classic gravity models, and models that do not use deep neural networks or geographic data, Deep Gravity performed better with good generalization capability and generated realistic flows.</p>
</section>
<section id="geographically-weighted-methods" class="level4" data-number="3.2.3">
<h4 data-number="3.2.3" class="anchored" data-anchor-id="geographically-weighted-methods"><span class="header-section-number">3.2.3</span> Geographically Weighted Methods</h4>
<p>While machine learning methods have relatively better performance in solving nonlinear problems, they assume that data points are independent and identically distributed, which are usually not valid for spatial data <span class="citation" data-cites="yang_geographically_2023">(<a href="#ref-yang_geographically_2023" role="doc-biblioref">Yang et al., 2023</a>)</span>. These machine learning methods do not address spatial heterogeneity that these geospatial data possess. Studies have attempted to factor spatial heterogeneity in the machine learning models and found that those models that take in the spatial aspects gave better performance. For example, <span class="citation" data-cites="georganos_geographical_2021">Georganos et al. (<a href="#ref-georganos_geographical_2021" role="doc-biblioref">2021</a>)</span> found that geographical random forest outperformed a globally specified random forest with more accurate predictions. Another study by <span class="citation" data-cites="yang_geographically_2023">Yang et al. (<a href="#ref-yang_geographically_2023" role="doc-biblioref">2023</a>)</span> also found that when geographically weighted regression (GWR) was integrated with support vector machine, the resultant model was found to have better prediction accuracy than using GWR model, and support vector regression model separately. <span class="citation" data-cites="hagenauer_geographically_2022">Hagenauer &amp; Helbich (<a href="#ref-hagenauer_geographically_2022" role="doc-biblioref">2022</a>)</span> proposed a geographically weighted artificial neural netwrok, which combines geographical weighting with an artificial neural network, and found that geographically weighted artificial neural network (GWANN) had better predictive performance than GWR when the relationships within the data are nonlinear and their spatial variance is high.</p>
<p>Outside of transportation studies on commuter flows, there are studies done using geographically weighted deep neural networks (GWDNN) to determine the down dead wood volume, which is crucial for sustaining forest management and predicting dynamic changes in forest resources and assessing the risks of natural disasters or disturbances. The study by <span class="citation" data-cites="sun_geographically_2021">Sun et al. (<a href="#ref-sun_geographically_2021" role="doc-biblioref">2021</a>)</span> found that GWDNN model was far more superior as compared to an ordinary least squares model, a linear mixed moodel, a GWR model and a deep neural network model. In another study by <span class="citation" data-cites="siqi_novel_2023">(<a href="#ref-siqi_novel_2023" role="doc-biblioref">Siqi et al., 2023</a>)</span>, they used a hybrid technique by combining GWR and deep neural network to predict land surface temperature and found that this hybrid technique performed best in terms of model fitness and prediction error, as compared to ordinary least squares model, GWR, and deep neural network.</p>
</section>
</section>
</section>
<section id="research-design-and-methods" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="research-design-and-methods"><span class="header-section-number">4</span> Research Design and Methods</h2>
<section id="data" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="data"><span class="header-section-number">4.1</span> Data</h3>
<p>For this project, we will use data from LTA Datamall, Department of Statistics, Singapore, and Data.gov.sg.&nbsp;</p>
<ul>
<li><p><u>Passenger Volume by Bus stops</u>. First, to get the number of trips between origin and destination bus stops, we will make use of the “Passenger Volume by Bus stops” from LTA Datamall which provides information on the number of trips by weekdays and weekends from origin to destination bus stops. To download this dataset, we need to make use of LTA Datamall’s API and we can only request for files up to the last 3 months. This dataset has 7 fields: <em>Year Month</em> (e.g.&nbsp;2024 – 06), <em>Day type</em> (i.e.&nbsp;Weekends/ Holiday, Weekday), <em>Time per hour</em> which ranges from 0 to 23, <em>Public Transport Type</em> which is bus, <em>origin point code</em> (i.e.&nbsp;bus stop number of the origin bus stop), <em>destination point code</em> (i.e., bus stop number of the destination bus stop) and <em>total trips</em>. As this dataset only has the bus stop number of the origin and destination bus stops and does not have the geographical information of the bus stops, we would need to join this data with (1) LTA Datamall’s “Bus Stop Location” dataset to find out the bus stops’ geographical information and (2) the subzone boundary data of URA Master Plan 2019 from data.gov.sg to find out the subzones that these bus stops are located in. To get the total number of commuter flows for morning peak hour on weekdays, we would extract commuter flows on weekday using the <em>Day type</em> field and between 6 and 9 in the morning using the <em>Time per hour</em> field, then aggregate these flows by the origin and destination bus stops using the <em>origin point code</em> and <em>destination point code</em>.&nbsp;</p></li>
<li><p><u>Population Data</u>. To find out the number of people residing at the origins and destinations, we will use the “Singapore Residents by Planning Area/subzone, Single year of age and sex, Jun 2023” dataset from Singapore Department of Statistics. This dataset contains 6 fields: <em>Planning Area</em> (e.g.&nbsp;“Ang Mo Kio”), <em>Subzone</em> (e.g.&nbsp;“Ang Mo Kio Town Centre”), <em>Age</em>, <em>Sex</em>, <em>Population</em>, and <em>Time</em> (i.e.&nbsp;2023, which is the year of the data being collected). As this dataset provides information on the number of Singapore residents staying at the various planning area and subzones, rather than the exact address, the Passenger Volume by Bus Stops needed to join with the subzone boundary data of URA Master Plan 2019 which contains the information on the planning area and subzone, to know the bus stops are in which planning area and subzone.</p></li>
<li><p><u>Office Location Data</u>. As there are no public dataset on the number of offices in Singapore, we will use a ACRA’s information on corporate entities datasets to get an estimate of the number of offices located in Singapore. ACRA has split the corporate entities by the letter that they start with, there are 27 files containing corporate entities that start from letter ‘A’ to ‘Z’ and others. This dataset has 53 fields, and we are interested in the <em>Postal Code</em> field which can give us the geographical location of these corporate entities. To get the geographical location of these corporate entities, we will need to combine all the 27 files, then use the Postal Code in the dataset and OneMap’s API to get the point coordinates of all the corporate entities in Singapore.</p></li>
</ul>
</section>
<section id="methods-and-r-packages" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="methods-and-r-packages"><span class="header-section-number">4.2</span> Methods and R Packages</h3>
<p>For this capstone project, we will gather, pre-process and wrangle the data collected from various open-source websites which includes LTA datamall, data.gov.sg and Singapore Department of Statistics. Thereafter, we will analyse the bus commuter flows on weekday morning peak hours from 6am to 9am and examine the key variables the affect commuter movements, such as population density, distribution of employment and transportation infrastructure. Next, we will develop and calibrate gravity models using (1) non-spatial statistical methods such as ordinary least squares regression, Poisson regression, negative binomial distribution, (2) spatial statistical methods such as geographical weighted regression, geographical weighted Poisson regression, geographical weighted negative binomial, (3) non-spatial machine learning methods such as decision trees, random forests, artificial neural networks, and (4) spatial machine learning methods such as geographically weighted random forests, geographically weighted artificial neural networks. Then we will use these calibrated models to predict the commuter flows, compare the predicted flows with actual flows, and evaluate the differences when non-spatial and spatial approaches are applied in statistical and machine learning methods.</p>
<p>For this project, the following R packages would be used:</p>
<ul>
<li><p>Tidyerse: to import, integrate and manipulate non-spatial data.</p></li>
<li><p>sf: to import, integrate and process geospatial data.</p></li>
<li><p>tmap: to create elegant and cartographic quality thematic maps.</p></li>
<li><p>tidymodels: to build, fit, calibrate and evaluate machine learning models such as SVMs and neural networks.</p></li>
<li><p>spatialML: to implement a spatial extension of random forest.</p></li>
<li><p>spatialRF: for automatic generation and selection of spatial predictors for spatial regression with Random Forest.</p></li>
<li><p>gwann: to implement geographically weighted artificial neural network.</p></li>
<li><p>GWmodel: to explore spatial heterogeneity using geographically weighted models.</p></li>
</ul>
</section>
</section>
<section id="schedule" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="schedule"><span class="header-section-number">5</span> Schedule</h2>
<p>For this capstone project, it would take approximately 16 weeks to complete from date of proposal approval, which is tentatively in September 2024. From June 2024 to August 2024, topic exploration, writing and reviewing of project proposal would take place. Between September 2024 and October 2024, we would be doing data cleaning and wrangling, building and tweaking the models and writing the progress report, which is due 12 weeks from the proposal approval date. From October 2024 to December 2024, the focus would be on finalising the models, and preparing the poster, presentation slides and final report. The details of the various milestones can be seen in <u>Figure 3</u>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/Timeline_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure 3 - Project Schedule"><img src="images/Timeline_1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Figure 3 - Project Schedule"></a></p>
</figure>
</div>
<figcaption>Figure 3 - Project Schedule</figcaption>
</figure>
</div>
</section>
<section id="conclusions-and-contributions" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="conclusions-and-contributions"><span class="header-section-number">6</span> Conclusions and Contributions</h2>
<p>Through this project, it would allow us to compare the non-spatial and spatial approaches in statistical and machine learning methods to predict Singapore bus commuter flows using open-source data. In addition, this project will enrich the existing work on using geographically weighted machine learning methods to predict commuter flows since studies on geographically weighted machine learning methods are still developing. Hence, this project would not only allow us to better understand if geographically weighted machine learning methods can help us better predict commuter flows but also help Singapore transport planners and providers better understand Singapore bus commuters’ demand for buses.</p>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-barbosa_human_2018" class="csl-entry" role="listitem">
Barbosa, H., Barthelemy, M., Ghoshal, G., James, C. R., Lenormand, M., Louail, T., Menezes, R., Ramasco, J. J., Simini, F., &amp; Tomasini, M. (2018). Human mobility: <span>Models</span> and applications. <em>Physics Reports</em>, <em>734</em>, 1–74. <a href="https://doi.org/10.1016/j.physrep.2018.01.001">https://doi.org/10.1016/j.physrep.2018.01.001</a>
</div>
<div id="ref-centre_for_liveable_cities_singapore_creating_2016" class="csl-entry" role="listitem">
Centre for Liveable Cities, Singapore, &amp; Urban Land Institute (Eds.). (2016). <em>Creating liveable cities through car-lite urban mobility</em>. Centre for Liveable Cities : Urban Land Institute.
</div>
<div id="ref-chen_use_2011" class="csl-entry" role="listitem">
Chen, Q., Li, W., &amp; Zhao, J. (2011). The <span>Use</span> of <span>LS</span>-<span>SVM</span> for <span>Short</span>-<span>Term</span> <span>Passenger</span> <span>Flow</span> <span>Prediction</span>. <em>Transport</em>, <em>26</em>(1), 5–10. <a href="https://doi.org/10.3846/16484142.2011.555472">https://doi.org/10.3846/16484142.2011.555472</a>
</div>
<div id="ref-ding_predicting_2016" class="csl-entry" role="listitem">
Ding, C., Wang, D., Ma, X., &amp; Li, H. (2016). Predicting <span>Short</span>-<span>Term</span> <span>Subway</span> <span>Ridership</span> and <span>Prioritizing</span> <span>Its</span> <span>Influential</span> <span>Factors</span> <span>Using</span> <span>Gradient</span> <span>Boosting</span> <span>Decision</span> <span>Trees</span>. <em>Sustainability</em>, <em>8</em>(11), 1100. <a href="https://doi.org/10.3390/su8111100">https://doi.org/10.3390/su8111100</a>
</div>
<div id="ref-fotheringham_spatial_1989" class="csl-entry" role="listitem">
Fotheringham, A. S., &amp; O’Kelly, M. E. (1989). <em>Spatial interaction models: Formulations and applications</em>. Kluwer Academic Publishers.
</div>
<div id="ref-georganos_geographical_2021" class="csl-entry" role="listitem">
Georganos, S., Grippa, T., Niang Gadiaga, A., Linard, C., Lennert, M., Vanhuysse, S., Mboga, N., Wolff, E., &amp; Kalogirou, S. (2021). Geographical random forests: A spatial extension of the random forest algorithm to address spatial heterogeneity in remote sensing and population modelling. <em>Geocarto International</em>, <em>36</em>(2), 121–136. <a href="https://doi.org/10.1080/10106049.2019.1595177">https://doi.org/10.1080/10106049.2019.1595177</a>
</div>
<div id="ref-hagenauer_geographically_2022" class="csl-entry" role="listitem">
Hagenauer, J., &amp; Helbich, M. (2022). A geographically weighted artificial neural network. <em>International Journal of Geographical Information Science</em>, <em>36</em>(2), 215–235. <a href="https://doi.org/10.1080/13658816.2021.1871618">https://doi.org/10.1080/13658816.2021.1871618</a>
</div>
<div id="ref-kok_more_2021" class="csl-entry" role="listitem">
Kok, Y. (2021). More <span>S</span>’pore residents take trains and buses to work, fewer drive to the office: <span>Population</span> census. <em>The Straits Times</em>. <a href="https://www.straitstimes.com/singapore/more-spore-residents-take-trains-and-buses-to-work-fewer-drive-to-the-office-population">https://www.straitstimes.com/singapore/more-spore-residents-take-trains-and-buses-to-work-fewer-drive-to-the-office-population</a>
</div>
<div id="ref-kusonkhum_using_2022" class="csl-entry" role="listitem">
Kusonkhum, W., Srinavin, K., Leungbootnak, N., &amp; Chaitongrat, T. (2022). Using a <span>Machine</span> <span>Learning</span> <span>Approach</span> to <span>Predict</span> the <span>Thailand</span> <span>Underground</span> <span>Train</span>’s <span>Passenger</span>. <em>Journal of Advanced Transportation</em>, <em>2022</em>, 1–15. <a href="https://doi.org/10.1155/2022/8789067">https://doi.org/10.1155/2022/8789067</a>
</div>
<div id="ref-land_transport_authority_land_2008" class="csl-entry" role="listitem">
Land Transport Authority. (2008). <em>Land <span>Transport</span> <span>Master</span> <span>Plan</span> 2008</em>. Land Transport Authority. <a href="https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP-Report.pdf">https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP-Report.pdf</a>
</div>
<div id="ref-land_transport_authority_land_2013" class="csl-entry" role="listitem">
Land Transport Authority. (2013). <em>Land <span>Transport</span> <span>Master</span> <span>Plan</span> 2013</em>. Land Transport Authority. <a href="https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP2013Report.pdf">https://www.lta.gov.sg/content/dam/ltagov/who_we_are/statistics_and_publications/master-plans/pdf/LTMP2013Report.pdf</a>
</div>
<div id="ref-land_transport_authority_land_2019" class="csl-entry" role="listitem">
Land Transport Authority. (2019). <em>Land <span>Transport</span> <span>Master</span> <span>Plan</span> 2040</em>. Land Transport Authority. <a href="https://www.lta.gov.sg/content/dam/ltagov/who_we_are/our_work/land_transport_master_plan_2040/pdf/LTA%20LTMP%202040%20eReport.pdf">https://www.lta.gov.sg/content/dam/ltagov/who_we_are/our_work/land_transport_master_plan_2040/pdf/LTA%20LTMP%202040%20eReport.pdf</a>
</div>
<div id="ref-lenormand_systematic_2016" class="csl-entry" role="listitem">
Lenormand, M., Bassolas, A., &amp; Ramasco, J. J. (2016). Systematic comparison of trip distribution laws and models. <em>Journal of Transport Geography</em>, <em>51</em>, 158–169. <a href="https://doi.org/10.1016/j.jtrangeo.2015.12.008">https://doi.org/10.1016/j.jtrangeo.2015.12.008</a>
</div>
<div id="ref-openshaw_theoretical_1975" class="csl-entry" role="listitem">
Openshaw, S. (1975). <em>Some <span>Theoretical</span> and <span>Applied</span> <span>Aspects</span> of <span>Spatial</span> <span>Interaction</span> <span>Shopping</span> <span>Models</span></em> (Vol. 4). Geo Abstracts Ltd.
</div>
<div id="ref-oshan_spatial_2022" class="csl-entry" role="listitem">
Oshan, T. (2022). Spatial <span>Interaction</span> <span>Modeling</span>. In S. J. Rey &amp; R. Franklin (Eds.), <em>Handbook of <span>Spatial</span> <span>Analysis</span> in the <span>Social</span> <span>Sciences</span></em> (pp. 208–222). Edward Elgar Publishing. <a href="https://doi.org/10.4337/9781789903942.00020">https://doi.org/10.4337/9781789903942.00020</a>
</div>
<div id="ref-pourebrahim_trip_2019" class="csl-entry" role="listitem">
Pourebrahim, N., Sultana, S., Niakanlahiji, A., &amp; Thill, J.-C. (2019). Trip distribution modeling with <span>Twitter</span> data. <em>Computers, Environment and Urban Systems</em>, <em>77</em>, 101354. <a href="https://doi.org/10.1016/j.compenvurbsys.2019.101354">https://doi.org/10.1016/j.compenvurbsys.2019.101354</a>
</div>
<div id="ref-wolf_spatial_2024" class="csl-entry" role="listitem">
Rowe, F., Lovelace, R., &amp; Dennett, A. (2024). Spatial interaction modelling: A manifesto. In L. J. Wolf, R. Harris, &amp; A. Heppenstall (Eds.), <em>A <span>Research</span> <span>Agenda</span> for <span>Spatial</span> <span>Analysis</span></em> (pp. 177–196). Edward Elgar Publishing. <a href="https://doi.org/10.4337/9781802203233.00019">https://doi.org/10.4337/9781802203233.00019</a>
</div>
<div id="ref-simini_deep_2021" class="csl-entry" role="listitem">
Simini, F., Barlacchi, G., Luca, M., &amp; Pappalardo, L. (2021). A <span>Deep</span> <span>Gravity</span> model for mobility flows generation. <em>Nature Communications</em>, <em>12</em>(1), 6576. <a href="https://doi.org/10.1038/s41467-021-26752-4">https://doi.org/10.1038/s41467-021-26752-4</a>
</div>
<div id="ref-siqi_novel_2023" class="csl-entry" role="listitem">
Siqi, J., Yuhong, W., Ling, C., &amp; Xiaowen, B. (2023). A novel approach to estimating urban land surface temperature by the combination of geographically weighted regression and deep neural network models. <em>Urban Climate</em>, <em>47</em>, 101390. <a href="https://doi.org/10.1016/j.uclim.2022.101390">https://doi.org/10.1016/j.uclim.2022.101390</a>
</div>
<div id="ref-stouffer_intervening_1940" class="csl-entry" role="listitem">
Stouffer, S. A. (1940). Intervening <span>Opportunities</span>: <span>A</span> <span>Theory</span> <span>Relating</span> <span>Mobility</span> and <span>Distance</span>. <em>American Sociological Review</em>, <em>5</em>(6), 845. <a href="https://doi.org/10.2307/2084520">https://doi.org/10.2307/2084520</a>
</div>
<div id="ref-sun_geographically_2021" class="csl-entry" role="listitem">
Sun, Y., Ao, Z., Jia, W., Chen, Y., &amp; Xu, K. (2021). A geographically weighted deep neural network model for research on the spatial distribution of the down dead wood volume in <span>Liangshui</span> <span>National</span> <span>Nature</span> <span>Reserve</span> (<span>China</span>). <em>iForest - Biogeosciences and Forestry</em>, <em>14</em>(4), 353–361. <a href="https://doi.org/10.3832/ifor3705-014">https://doi.org/10.3832/ifor3705-014</a>
</div>
<div id="ref-yang_geographically_2023" class="csl-entry" role="listitem">
Yang, W., Deng, M., Tang, J., &amp; Luo, L. (2023). Geographically weighted regression with the integration of machine learning for spatial prediction. <em>Journal of Geographical Systems</em>, <em>25</em>(2), 213–236. <a href="https://doi.org/10.1007/s10109-022-00387-5">https://doi.org/10.1007/s10109-022-00387-5</a>
</div>
<div id="ref-yeghikyan_learning_2020" class="csl-entry" role="listitem">
Yeghikyan, G., Opolka, F. L., Nanni, M., Lepri, B., &amp; Lio, P. (2020). Learning <span>Mobility</span> <span>Flows</span> from <span>Urban</span> <span>Features</span> with <span>Spatial</span> <span>Interaction</span> <span>Models</span> and <span>Neural</span> <span>Networks</span>. <em>2020 <span>IEEE</span> <span>International</span> <span>Conference</span> on <span>Smart</span> <span>Computing</span> (<span>SMARTCOMP</span>)</em>, 57–64. <a href="https://doi.org/10.1109/SMARTCOMP50058.2020.00028">https://doi.org/10.1109/SMARTCOMP50058.2020.00028</a>
</div>
<div id="ref-zipf_p_1946" class="csl-entry" role="listitem">
Zipf, G. K. (1946). The <span>P</span> 1 <span>P</span> 2 <span>D</span> <span>Hypothesis</span>: <span>On</span> the <span>Intercity</span> <span>Movement</span> of <span>Persons</span>. <em>American Sociological Review</em>, <em>11</em>(6), 677. <a href="https://doi.org/10.2307/2087063">https://doi.org/10.2307/2087063</a>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","descPosition":"bottom","loop":false,"openEffect":"zoom","closeEffect":"zoom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>